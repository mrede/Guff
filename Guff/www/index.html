<!DOCTYPE html>
<html>
  <head>
  <title></title>
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
	<meta charset="utf-8">

    <link rel="stylesheet" href="stylesheets/base.css">
	<link rel="stylesheet" href="stylesheets/skeleton.css">
	<link rel="stylesheet" href="stylesheets/layout.css">
    
	<!-- iPad/iPhone specific css below, add after your main css >
	<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />		
	<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />		
	-->
	<!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
	<script type="text/javascript" charset="utf-8" src="phonegap-1.3.0.js"></script>
	
	<!-- vendor libraries -->
	<script src="http://js.pusherapp.com/1.8.2/pusher.min.js" type="text/javascript"></script>
	<script src="/javascripts/vendor/zepto/zepto.js"></script>
    <script src="/javascripts/vendor/zepto/event.js"></script>
    <script src="/javascripts/vendor/zepto/ajax.js"></script>
    
    <!-- application -->
    <script src="/javascripts/application.js"></script>
    
    <script type='text/javascript'>
        function onBodyLoad()
        {		
        	document.addEventListener("deviceready", onDeviceReady, false);
        }
        
        function onDeviceReady()
        {
        	navigator.notification.alert("PhoneGap is working");
        	checkConnection();
        }
        
        /* Check to see if they have net connection */
        function checkConnection() {
            var networkState = navigator.network.connection.type;

            var states = {};
            states[Connection.UNKNOWN]  = 'Unknown connection';
            states[Connection.ETHERNET] = 'Ethernet connection';
            states[Connection.WIFI]     = 'WiFi connection';
            states[Connection.CELL_2G]  = 'Cell 2G connection';
            states[Connection.CELL_3G]  = 'Cell 3G connection';
            states[Connection.CELL_4G]  = 'Cell 4G connection';
            states[Connection.NONE]     = 'No network connection';

            alert('Connection type: ' + states[networkState]);
            
            ///Remember to put the init call here once we are happy all is good
            //var guff = new Guff();
            //guff.init();
        }
    </script>  
  </head>
  <body onload="onBodyLoad()">
    <div class="container">
        <div id="error"></div>
        <button id="refresh_location">Refresh Location</button>
        <img id="map" src="loading.gif" />
        <form id="post-message" action="http://guffserver.local/message" method="post">
            <label for="post_text">Post a message [<span id="counter">148</span> characters]</label>
            <textarea rows="4" cols="30" name="post[text]" id="post_text"></textarea>
            <input type="submit" value="send"/>
            <em>Your message will be visible within a 200m range of here for 2hrs</em>
            <input type="hidden" name="post[id]" id="post_id" />
            <input type="hidden" name="post[accuracy]" id="post_accuracy" />
            <input type="hidden" name="post[latitude]" id="post_latitude" />
            <input type="hidden" name="post[longitude]" id="post_longitude" />
        </form>
        <ul id="messages">
            <li>Guff 1</li>
        </ul>
	</div>
  </body>
</html>
